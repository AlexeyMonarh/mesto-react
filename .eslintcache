[{"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/index.js":"1","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/reportWebVitals.js":"2","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/App.js":"3","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/projectAuth.js":"4","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Main/Main.js":"5","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/contexts/CurrentUserContext.js":"6","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/ImagePopup/ImagePopup.js":"7","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/EditProfilePopup/EditProfilePopup.js":"8","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/EditAvatarPopup/EditAvatarPopup.js":"9","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/AddPlacePopup/AddPlacePopup.js":"10","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/RemoveCardPopup/RemoveCardPopup.js":"11","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Login/Login.js":"12","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Register/Register.js":"13","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/ProtectedRoute/ProtectedRoute.js":"14","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/InfoTooltip/InfoTooltip.js":"15","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/utils/api.js":"16","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Footer/Footer.js":"17","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Card/Card.js":"18","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Header/Header.js":"19","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/PopupWithForm/PopupWithForm.js":"20"},{"size":395,"mtime":1615462756090,"results":"21","hashOfConfig":"22"},{"size":364,"mtime":1615462771474,"results":"23","hashOfConfig":"22"},{"size":8270,"mtime":1615204124306,"results":"24","hashOfConfig":"22"},{"size":1206,"mtime":1615203348309,"results":"25","hashOfConfig":"22"},{"size":1829,"mtime":1615203573828,"results":"26","hashOfConfig":"22"},{"size":85,"mtime":1615202360662,"results":"27","hashOfConfig":"22"},{"size":660,"mtime":1615203006081,"results":"28","hashOfConfig":"22"},{"size":1525,"mtime":1615203460565,"results":"29","hashOfConfig":"22"},{"size":860,"mtime":1615203132618,"results":"30","hashOfConfig":"22"},{"size":1272,"mtime":1615203374130,"results":"31","hashOfConfig":"22"},{"size":487,"mtime":1615202880661,"results":"32","hashOfConfig":"22"},{"size":1571,"mtime":1615203477674,"results":"33","hashOfConfig":"22"},{"size":1971,"mtime":1615203627298,"results":"34","hashOfConfig":"22"},{"size":323,"mtime":1615202714940,"results":"35","hashOfConfig":"22"},{"size":745,"mtime":1615203063597,"results":"36","hashOfConfig":"22"},{"size":1962,"mtime":1615203623350,"results":"37","hashOfConfig":"22"},{"size":264,"mtime":1615202648374,"results":"38","hashOfConfig":"22"},{"size":1572,"mtime":1615203478034,"results":"39","hashOfConfig":"22"},{"size":1359,"mtime":1615203405661,"results":"40","hashOfConfig":"22"},{"size":828,"mtime":1615203114096,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"1t0c571",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"44"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70","usedDeprecatedRules":"44"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"85"},"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/index.js",[],["86","87"],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/reportWebVitals.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/App.js",["88","89"],"import { React, useEffect, useState } from \"react\";\nimport { Route, Switch, Redirect, withRouter, useHistory } from \"react-router-dom\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport succed from '../images/vector/succed.svg';\nimport fail from '../images/vector/fail.svg';\nimport Main from '../components/Main/Main';\nimport ImagePopup from '../components/ImagePopup/ImagePopup';\nimport EditProfilePopup from '../components/EditProfilePopup/EditProfilePopup';\nimport EditAvatarPopup from '../components/EditAvatarPopup/EditAvatarPopup';\nimport AddPlacePopup from '../components/AddPlacePopup/AddPlacePopup';\nimport RemoveCardPopup from '../components/RemoveCardPopup/RemoveCardPopup';\nimport Login from '../components/Login/Login';\nimport Register from '../components/Register/Register';\nimport ProtectedRoute from '../components/ProtectedRoute/ProtectedRoute';\nimport InfoTooltip from '../components/InfoTooltip/InfoTooltip';\nimport api from '../utils/api';\nimport * as projectAuth from './projectAuth';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState(false);\n  const [currentUser, setСurrentUser] = useState(\"\");\n  // const [currentId, setCurrentId] = useState(\"\");\n  const [cards, setCards] = useState([]);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userData, setUserData] = useState({\n    email: '',\n    password: '',\n  });\n  const [infoTool, setInfoTool] = useState({\n    message: '',\n    img: ''\n  });\n  const [registerPopup, setRegisterPopup] = useState();\n\n  const err = (res) => {\n    console.log(`Ошибка: ${res}`);\n  };\n\n  const history = useHistory();\n\n  const escFunction = (event) => {\n    if (event.keyCode === 27) {\n      closeAllPopups();\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('jwt');\n    if (token) {\n      projectAuth.getContent(token).then((res) => {\n        if (!res || res.statusCode === 401) {\n          throw new Error('Переданный токен некорректен');\n        }\n        if (res) {\n          setUserData({ email: res.data.email });\n        }\n      })\n        .then(() => {\n          setLoggedIn(true);\n          history.push(\"/\");\n        })\n        .catch((res) => {\n          console.log(`Ошибка: ${res}`);\n        })\n    }\n  }, []);\n\n  useEffect(() => {\n    if (loggedIn) {\n      history.push('/');\n    }\n  }, [loggedIn]);\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", escFunction, false);\n    return () => {\n      document.removeEventListener(\"keydown\", escFunction, false);\n    };\n  });\n\n  useEffect(() => {\n    api.getInitialCards().then((res) => {\n      setCards(res);\n    }).catch(err)\n  }, []);\n\n  useEffect(() => {\n    api.getUser().then((res) => {\n      setСurrentUser(res);\n    }).catch(err)\n  }, []);\n\n  function handleRegister(data) {\n    const { email, password } = data;\n    return projectAuth.register(email, password).then((res) => {\n      if (res) {\n        setRegisterPopup(true);\n        setInfoTool({\n          message: 'Вы успешно зарегистрировались!',\n          img: succed\n        })\n      }\n      if (!res || res.statusCode === 400) {\n        throw new Error('Некорректно заполнено одно из полей');\n      }\n    })\n      .catch((err) => {\n        setRegisterPopup(true);\n        setInfoTool({\n          message: 'Что-то пошло не так! Попробуйте ещё раз.',\n          img: fail\n        })\n        console.log(`Такой email существует ${err}`)\n      })\n  }\n\n  function handleLogin(data) {\n    const { email, password } = data;\n    setUserData({ email: email });\n    return projectAuth.authorize(email, password).then((res) => {\n      if (!res || res.statusCode === 400) {\n        throw new Error('Не передано одно из полей');\n      }\n      if (res.token) {\n        setLoggedIn(true);\n        localStorage.setItem('jwt', res.token)\n      }\n    })\n      .catch(err)\n  }\n\n  function signOut() {\n    localStorage.removeItem('jwt')\n    setLoggedIn(false)\n    history.push('/sign-in')\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.createNewCard(data).then((res) => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    }).catch(err)\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.changeLikeCardStatus(card._id, !isLiked).then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    }).catch(err)\n  }\n\n  // function setId(card) {\n  //   setCurrentId(card)\n  // }\n\n  function handleCardDelete(cardId) {\n    api.deleteCard(cardId).then(() => {\n      const newList = cards.filter((c) => c._id !== cardId);\n      return setCards(newList);\n    })\n      .then(closeAllPopups())\n      .catch(err)\n  }\n\n  function handleUpdateAvatar(data) {\n    api.setAvatar(data)\n      .then((res) => {\n        setСurrentUser(res);\n        closeAllPopups();\n      }).catch(err)\n  }\n\n  function handleUpdateUser(data) {\n    api.setUserInfo(data.name, data.about)\n      .then((res) => {\n        setСurrentUser(res);\n        closeAllPopups();\n      }).catch(err);\n  }\n\n  function handleDeleteCardClick() {\n    setIsDeletePopupOpen(true);\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  function handleCardClick(props) {\n    setSelectedCard({ link: props.link, name: props.name });\n  }\n\n  function closeAllPopups() {\n    setIsDeletePopupOpen(false)\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setSelectedCard(false);\n    setRegisterPopup(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"App\">\n        \n        <Switch>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            component={Main}\n            email={userData.email}\n            signOut={signOut}\n            loggedIn={loggedIn}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            onCardLike={handleCardLike}\n            onPopupDelete={handleDeleteCardClick}\n            // setId={setId}\n            handleCardDelete={handleCardDelete}\n          />\n          <Route path=\"/sign-in\">\n            <Login\n              handleLogin={handleLogin}\n            />\n          </Route>\n          <Route path=\"/sign-up\">\n            <Register\n              onRegister={handleRegister}\n            />\n          </Route>\n          <Route>\n            {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n          <Route path=\"/my-profile\">\n          </Route>\n        </Switch>\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onCreateCard={handleAddPlaceSubmit}\n        />\n\n        <RemoveCardPopup\n          isOpen={isDeletePopupOpen}\n          onClose={closeAllPopups}\n          onCardDelete={handleCardDelete}\n        // currentId={currentId}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n        <InfoTooltip\n          isOpen={registerPopup}\n          onClose={closeAllPopups}\n          infoTool={infoTool}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default withRouter(App);","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/projectAuth.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Main/Main.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/contexts/CurrentUserContext.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/ImagePopup/ImagePopup.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/EditProfilePopup/EditProfilePopup.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/EditAvatarPopup/EditAvatarPopup.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/AddPlacePopup/AddPlacePopup.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/RemoveCardPopup/RemoveCardPopup.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Login/Login.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Register/Register.js",["90"],"import { React, useState } from \"react\";\nimport { Link, useHistory } from 'react-router-dom';\nimport Header from '../../components/Header/Header';\n\nfunction Register({ onRegister }) {\n  const [inputValue, setInputValue] = useState({\n    email: '',\n    password: '',\n  });\n  const [massage, setMassage] = useState('');\n\n  function handleChange(e) {\n    const { name, value } = e.target;\n    setInputValue({\n      ...inputValue,\n      [name]: value,\n    });\n  }\n\n  const history = useHistory();\n\n  function habdleSubmite(e) {\n    e.preventDefault();\n    onRegister(inputValue)\n      .then(() => {\n        history.push('/sign-in')\n      }).catch((err) => {\n        setMassage(err.massage || 'Ошибка при регистрации')\n      });\n  }\n\n  return (\n    <div className=\"loginContainer\">\n      <Header title=\"Вход\" to=\"/sing-in\" />\n      <div className=\"register\">\n        <form action=\"#\" className=\"popup__inputs register__form register__form_mobile\" onSubmit={habdleSubmite}>\n          <h2 className=\"popup__heading\">Регистрация</h2>\n          <input type=\"email\" name=\"email\" className=\"popup__input register__input\" onChange={handleChange} value={inputValue.email} placeholder=\"Email\" required autoComplete=\"off\" />\n          {/* <span className=\"popup__error\" id=\"name-error\"></span> */}\n          <input type=\"password\" name=\"password\" className=\"popup__input register__input\" onChange={handleChange} value={inputValue.password} placeholder=\"Пароль\" required />\n          {/* <span className=\"popup__error\" id=\"link-error\"></span> */}\n          <button type=\"submit\" className=\"popup__submit-button register__button register__button_mobile\">Зарегистрироваться</button>\n          <span className=\"register__span register__span_mobile\">Уже зарегистрированы?<Link className=\"header__auth\" to=\"/sign-in\"> Войти</Link></span>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport default Register;","/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/ProtectedRoute/ProtectedRoute.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/InfoTooltip/InfoTooltip.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/utils/api.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Footer/Footer.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Card/Card.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/Header/Header.js",[],"/home/monarh/Yandex.Disk/Документы/Web_Development/projects/mesto-react/src/components/PopupWithForm/PopupWithForm.js",[],["91","92"],{"ruleId":"93","replacedBy":"94"},{"ruleId":"95","replacedBy":"96"},{"ruleId":"97","severity":1,"message":"98","line":70,"column":6,"nodeType":"99","endLine":70,"endColumn":8,"suggestions":"100"},{"ruleId":"97","severity":1,"message":"98","line":76,"column":6,"nodeType":"99","endLine":76,"endColumn":16,"suggestions":"101"},{"ruleId":"102","severity":1,"message":"103","line":10,"column":10,"nodeType":"104","messageId":"105","endLine":10,"endColumn":17},{"ruleId":"93","replacedBy":"106"},{"ruleId":"95","replacedBy":"107"},"no-native-reassign",["108"],"no-negated-in-lhs",["109"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["110"],["111"],"no-unused-vars","'massage' is assigned a value but never used.","Identifier","unusedVar",["108"],["109"],"no-global-assign","no-unsafe-negation",{"desc":"112","fix":"113"},{"desc":"114","fix":"115"},"Update the dependencies array to be: [history]",{"range":"116","text":"117"},"Update the dependencies array to be: [history, loggedIn]",{"range":"118","text":"119"},[2549,2551],"[history]",[2631,2641],"[history, loggedIn]"]